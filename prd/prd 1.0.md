# **产品需求文档：AI个人写作助手 \- V1.0**
## **1\. 修订历史**

| 版本号 | 修订日期 | 修订人 | 修订内容 |
| :---- | :---- | :---- | :---- |
| V1.0 | 2025-08-12 | prd编写专家 (AI) | 初稿创建 |

## 

## **2\. 项目背景与目标**
### **2.1 核心问题**
内容创作者在将零散的灵感和口述草稿转化为一篇结构完整、风格独特、图文并茂且符合特定平台要求的文章时，面临着效率低下、风格不稳定、素材搜集耗时等挑战。创作者需要一个能深度理解并模仿其个人写作风格，并能自动化完成大部分繁琐工作的智能工具。

### **2.2 需求目标**
本次需求旨在开发一个高度个人化的AI写作助手网站，实现以下目标：
1. **个性化风格学习**: 建立一个能吸收用户个人作品和偏好的知识库，让AI生成的内容具备用户的独特风格。  
2. **写作流程自动化**: 将从草稿到成文的流程（包括大纲、正文、配图）高度自动化，缩短创作周期。  
3. **提升文章质量**: 结合外部爆款文章模式和用户自定义的行文准则，提升最终稿件的吸引力和专业性。  
4. **一站式体验**: 在单一平台内完成文章构思、写作、编辑、配图及发布准备，实现“开箱即用”的交付。

## **3\. 用户画像与场景**
### **3.1 目标用户**
追求写作效率和内容质量的个人内容创作者、博主、自媒体人、知识工作者。

### **3.2 用户场景**
* **场景**: 用户脑海中有一个关于“未来能源”的灵感，他用语音输入法快速记录下了一段数千字的、逻辑比较零散的口述草稿。他希望在一个小时内，将这段草稿变成一篇结构清晰、带有自己深度思考风格、适合在公众号发布的专业分析文章，并配上合适的图片和封面。

## **4\. 功能需求详述**
### **4.1 功能模块一：知识库管理**
#### **4.1.1 用户故事 1.1：多格式源文件上传与统一存储**
* **作为** 写作用户, **我希望** 能通过上传文件（PDF, Word, MD）、粘贴文本或输入链接的方式添加我的作品和收藏案例, **以便于** 建立我个性化的“记忆库”和“案例库”。  
* **业务规则与逻辑**:  
  1. 支持.pdf, .docx, .md, .txt文件上传，支持粘贴文本，支持输入URL抓取正文。  
  2. 所有内容后台统一解析为Markdown格式存储。  
  3. 上传时用户可选择归入“记忆库”（个人风格源）或“案例库”（外部参考源）。  
* **验收标准**: 成功通过上述三种方式将文章存入指定知识库。

#### **4.1.2 用户故事 1.2：AI辅助的知识库组织与管理**
* **作为** 写作用户, **我希望** AI在我上传文章后，能自动建议分类和标签, **以便于** 我只需简单纠正就能高效管理知识库。  
* **业务规则与逻辑**:  
  1. 新文章入库后，AI自动建议3-5个内容标签和所属分类。  
  2. 提供管理界面，支持用户对AI的建议进行修改、确认，并能手动增删改查所有文章和标签。  
* **验收标准**: 上传一篇关于“AIGC”的文章后，AI能建议“人工智能”等相关标签，用户可成功修改并添加新标签。

#### **4.1.3 用户故事 1.3：协作式的风格要素提炼**
* **作为** 写作用户, **我希望** AI能分析我库中的文章，提炼出关键风格要素并让我确认, **以便于** 构建一个准确代表我个人风格的“主题风格要素库”。  
* **业务规则与逻辑**:  
  1. AI分析库内文章，从词汇、句法、结构、修辞等多维度提炼风格要素。  
  2. AI将提炼结果（如：“您的风格倾向于：1. 开篇设问；2. 常用‘底层逻辑’…”）展示给用户。  
  3. 用户可对每条要素进行“确认”、“忽略”或“修改”。该要素库在后台作为Prompt的一部分被调用。  
* **验收标准**: 系统能分析10篇文章并提炼出至少5条有意义的风格要素，用户可成功对要素进行修改。

#### **4.1.4 用户故事 1.4：智能化的个人术语与行文约束**
* **作为** 写作用户, **我希望** 建立个人术语和行文准则库，AI在写作时能智能应用, **以便于** 保证文章的专业性和个人偏好。  
* **业务规则与逻辑**:  
  1. 用户可建立“原文 \-\> 替换文”的术语库，并可建立自然语言描述的行文准则（如：“避免使用被动语态”）。  
  2. AI在生成内容时，会根据上下文智能判断是否应用这些规则。  
* **验收标准**: 在草稿中输入特定术语，AI能在合适的语境下进行替换。输入行文准则后，生成文章的风格符合该准则。

### **4.2 功能模块二：AI辅助写作执行**
#### **4.2.1 用户故事 2.1：启动写作并进行风格匹配**
* **作为** 写作用户, **我希望** 在输入口述草稿后，AI能从我的“案例库”推荐最匹配的1-3种写作风格让我选择, **以便于** 为文章快速选定高质量的风格基调。  
* **业务规则与逻辑**:  
  1. 用户输入草稿后，AI分析内容并从“案例库”中检索，推荐1-3个“风格原型”。  
  2. 以卡片形式向用户展示推荐的风格（含原文标题和风格简介），供用户选择。  
* **验收标准**: 输入一篇市场分析草稿后，AI推荐了库中一篇同类爆款文章作为风格原型，用户可成功选择。

#### **4.2.2 用户故事 2.2：手动触发的外部灵感增强**
* **作为** 写作用户, **我希望** 对研究性文章能手动启动“外部搜索”, **以便于** AI能借鉴全网爆款，为文章补充更丰富的论点和论据。  
* **业务规则与逻辑**:  
  1. 提供“启动外部搜索”按钮，由用户手动触发。外部搜索调用perplexity来实现。perplexity的API是：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  
  2. 触发后，AI在后台调用外部搜索工具，分析相关热门文章，提炼论点、数据、结构等要素，并融入到生成前的“超级Prompt”中。过程对用户不可见，只显示处理中状态。  
* **验收标准**: 启动该功能后，生成的文章提纲中包含了草稿未提及的、与主题相关的最新观点。

### **4.3 功能模块三：正文生成与交互式编辑**
#### **4.3.1 用户故事 3.1：可交互的动态大纲**
* **作为** 写作用户, **我希望** AI生成的提纲是可自由编辑的动态结构, **以便于** 在写作前方便地调整文章框架。  
* **业务规则与逻辑**:  
  1. 提纲以可交互的树状/列表形式呈现。  
  2. 用户可对提纲节点进行拖拽排序、修改文本、增加和删除节点操作。  
* **验收标准**: 用户能成功对提纲进行重排序、增、删、改操作。

#### **4.3.2 用户故事 3.2：一键生成完整文稿**
* **作为** 写作用户, **我希望** 确认提纲后能一键生成整篇文章, **以便于** 快速获得结构完整的初稿。  
* **业务规则与逻辑**:  
  1. 提供“生成全文”按钮，点击后AI根据最终提纲和所有上下文（风格、约束等）生成完整文章。  
* **验收标准**: 点击按钮后，AI能根据一个5节点的提纲，生成一篇包含5个对应章节的、风格一致的完整文章。

#### **4.3.3 用户故事 3.3 & 3.4：高级交互式编辑（对话式指令与划词建议）**
* **作为** 写作用户, **我希望** 能通过对话下指令或划词获得AI建议的方式修改文章, **以便于** 进行自然、高效、智能的稿件精修。  
* **业务规则与逻辑**:  
  1. **对话式修改**：提供对话框，对话框不用太大。主页面仍然应是文章内容，对话框用户输入“把这段改得风趣些”等自然语言指令，AI直接修改原文。  
  2. **划词建议**：用户可以划选文本，旁边自动出现快捷工具栏，提供“润色”、“扩写”、“缩写”、“改变语气”等一键优化选项，也提供直接提意见的功能。用户可以在选定范围中提出修改意见，AI只调整选定范围的内容。 
* **验收标准**: 输入指令“把引言缩短”，引言被成功精简。划选一个句子，点击“扩写”，句子内容被合理丰富；用户选定范围后提意见，AI只调整选定范围的内容。

### **4.4 功能模块四：图文包装与导出**
#### **4.4.1 用户故事 4.1：智能内文配图**
* **作为** 写作用户, **我希望** 在文稿确认后，AI能自动分析内容并生成合适的配图, **以便于** 快速完成文章的图文并茂。  
* **业务规则与逻辑**:  
  1. 提供“智能配图”按钮，在用户确认文字稿后手动触发。  
  2. AI自动分析全文，识别关键章节或内容点，提炼关键词生成约3张配图。  
  3. 图片自动插入到AI认为合适的文章位置。  
  4. 用户可点击不满意的图片，触发重新生成或修改指令。  
* 配图调用豆包生图：
  1. 豆包出图的api是：Bearer ca9d6a48-f76d-4c29-a621-2cf259a55b2f
  2. 豆包出图的api示例是：
curl -X POST https://ark.cn-beijing.volces.com/api/v3/images/generations \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ca9d6a48-f76d-4c29-a621-2cf259a55b2f" \
  -d '{
    "model": "doubao-seedream-3-0-t2i-250415",
    "prompt": "鱼眼镜头，一只猫咪的头部，画面呈现出猫咪的五官因为拍摄方式扭曲的效果。",
    "response_format": "url",
    "size": "1024x1024",
    "guidance_scale": 3,
    "watermark": true
}'

* **验收标准**: 点击按钮后，文章中成功插入了3张与内容高度相关的图片。用户可以成功重新生成其中一张图片。

#### **4.4.2 用户故事 4.2：独立的封面生成**
* **作为** 写作用户, **我希望** 有一个独立的封面生成工具, **以便于** 为不同平台制作专业、吸引人的封面图。  
* **业务规则与逻辑**:  
  1. 提供独立的“生成封面”按钮。  
  2. 该功能自动匹配项目启动时选择的发布平台（如公众号、小红书），来确定封面尺寸。  
  3. 用户可以选择不同风格（如科技感、卡通、纪实），AI据此生成1-3张封面供用户选择。  
  4. 用户可反复生成，直到满意并确认为止。  
* 同样调用前面提及的豆包生图的API
* **验收标准**: 选择“公众号”平台和“科技感”风格，成功生成了16:9尺寸、符合风格描述的封面图片。

#### **4.4.3 用户故事 4.3：一键复制与导出**
* **作为** 写作用户, **我希望** 能一键复制格式完美的最终稿件, **以便于** 直接粘贴到各大内容平台进行发布。  
* **业务规则与逻辑**:  
  1. 在编辑器最终界面，提供“一键复制”按钮。  
  2. 该按钮能将包含图片、标题、格式正确的全文内容（Markdown或富文本格式）复制到用户剪贴板，类似https://github.com/doocs/md的那种实现方式。
* **验收标准**: 点击复制后，内容能被无误地粘贴到公众号编辑器或Markdown编辑器中，且格式（如标题、加粗、图片）保持不变。

## **5\. 边界条件与约束**
1. **数据存储**: 项目初期，所有用户数据（知识库、设置等）均存储在浏览器的localStorage中，不涉及后端数据库。  
2. **用户体系**: V1.0版本为单用户系统，不考虑多租户或用户登录注册功能。

## **6\. 非功能性需求**
* **技术栈**:  
  * 前端: Next.js  
  * 语言: TypeScript  
* **性能需求**: 页面核心交互（如大纲拖拽、划词建议）响应时间应小于500毫秒。全文生成时间根据模型能力而定，但应有明确的进度提示。  
* **易用性需求**: 无需用户手册，核心功能区的交互应直观易懂。用户能在15分钟内走通“上传作品 \-\> 生成文章 \-\> 导出”的核心流程。  
* **兼容性需求**: 支持Chrome, Firefox, Safari, Edge等主流现代浏览器的最新版本。

## **7\. 数据指标 (用于衡量效果)**
1. **核心转化率**: “创建新文章”到“成功生成首个完整文稿”的转化率。  
2. **编辑效率**: 用户使用“对话指令”或“划词建议”修改的次数，衡量AI编辑功能的实用性。  
3. **用户满意度**: 在每次生成文章后，提供一个简单的“满意/不满意”反馈按钮。

## 大模型调用谷歌api：
1. 谷歌gemini api：AIzaSyAH-wepOrQu0ujJfeqbcz2Pn7wHHvLihxg
2. 谷歌gemini的api示例：
curl "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent" \
  -H 'Content-Type: application/json' \
  -H 'X-goog-api-key: GEMINI_API_KEY' \
  -X POST \
  -d '{
    "contents": [
      {
        "parts": [
          {
            "text": "Explain how AI works in a few words"
          }
        ]
      }
    ]
  }'


