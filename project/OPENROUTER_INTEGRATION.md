# OpenRouter API é›†æˆå®Œæˆ

## ğŸ“‹ é›†æˆæ¦‚è¿°

å·²æˆåŠŸå°†åº”ç”¨ä¸­æ‰€æœ‰çš„ Gemini API è°ƒç”¨åˆ‡æ¢ä¸º OpenRouter APIï¼Œä½¿ç”¨ Gemini 2.5 Flash Lite æ¨¡å‹ã€‚

## âœ… å·²å®Œæˆçš„ä¿®æ”¹

### 1. API è°ƒç”¨å‡½æ•°æ›´æ–°
- **æ–‡ä»¶**: `src/utils/api.ts`
- **ä¿®æ”¹**: å°†æ‰€æœ‰ `callGeminiAPI()` è°ƒç”¨æ›¿æ¢ä¸º `callOpenRouterAPI()`
- **å½±å“çš„åŠŸèƒ½**:
  - é£æ ¼è¦ç´ åˆ†æ (`analyzeStyleElements`)
  - é£æ ¼åŸå‹æ¨è (`recommendStylePrototypes`)
  - æ–‡ç« å¤§çº²ç”Ÿæˆ (`generateOutline`)
  - å®Œæ•´æ–‡ç« ç”Ÿæˆ (`generateFullArticle`)
  - ç¼–è¾‘æŒ‡ä»¤å¤„ç† (`processEditInstruction`)
  - é…å›¾æç¤ºè¯ç”Ÿæˆ (`generateImagePrompts`)

### 2. Hook çŠ¶æ€ç®¡ç†æ›´æ–°
- **æ–‡ä»¶**: `src/hooks/useAppState.ts`
- **ä¿®æ”¹**: æ›´æ–° import è¯­å¥ï¼Œä» `callGeminiAPI` æ”¹ä¸º `callOpenRouterAPI`

### 3. æµ‹è¯•åŠŸèƒ½æ›´æ–°
- **æ–‡ä»¶**: `src/utils/testApi.ts`
- **ä¿®æ”¹**: 
  - æ›´æ–° import è¯­å¥
  - ä¿®æ”¹æµ‹è¯•å‡½æ•°ä¸­çš„ API è°ƒç”¨
  - æ›´æ–°é…ç½®æ£€æŸ¥ï¼ˆä» `config.gemini` æ”¹ä¸º `config.openrouter`ï¼‰
  - ä¿®æ”¹æµ‹è¯•æ¶ˆæ¯å’Œæ—¥å¿—è¾“å‡º

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### API æ¶ˆæ¯æ ¼å¼
OpenRouter API ä½¿ç”¨ OpenAI å…¼å®¹çš„æ¶ˆæ¯æ ¼å¼ï¼š
```javascript
{
  model: 'google/gemini-2.5-flash-lite',
  messages: [
    {
      role: 'user',
      content: [
        {
          type: 'text',
          text: prompt
        }
      ]
    }
  ],
  max_tokens: 4000,
  temperature: 0.7
}
```

### å“åº”æ•°æ®ç»“æ„
å“åº”ä½¿ç”¨ OpenAI æ ¼å¼ï¼š
```javascript
{
  choices: [
    {
      message: {
        content: "ç”Ÿæˆçš„æ–‡æœ¬å†…å®¹"
      }
    }
  ],
  usage: {
    prompt_tokens: 100,
    completion_tokens: 200,
    total_tokens: 300
  }
}
```

## ğŸ¯ ä¼˜åŠ¿

1. **ç¨³å®šæ€§æå‡**: OpenRouter æä¾›æ›´ç¨³å®šçš„æœåŠ¡è®¿é—®
2. **ç½‘ç»œé—®é¢˜è§£å†³**: é¿å…ç›´æ¥è®¿é—® Google API çš„ç½‘ç»œé™åˆ¶
3. **ç›¸åŒæ¨¡å‹**: ä»ç„¶ä½¿ç”¨ Gemini 2.5 Flash Liteï¼Œä¿æŒæ¨¡å‹èƒ½åŠ›
4. **ç»Ÿä¸€ç®¡ç†**: é€šè¿‡ OpenRouter ç»Ÿä¸€ç®¡ç†å¤šä¸ª AI æ¨¡å‹

## ğŸ“Š å½“å‰çŠ¶æ€

### API æœåŠ¡çŠ¶æ€
- âœ… **OpenRouter API**: å·²è¿æ¥ï¼Œå“åº”æ—¶é—´ 1076ms
- âœ… **è±†åŒ…ç”Ÿå›¾API**: æ­£å¸¸å·¥ä½œ
- âœ… **Perplexity API**: æ™ºèƒ½é™çº§å¯ç”¨

### åŠŸèƒ½æ¨¡å—çŠ¶æ€
- âœ… **æ–‡æœ¬ç”Ÿæˆ**: ç°åœ¨ä½¿ç”¨ OpenRouter + Gemini 2.5 Flash Lite
- âœ… **å›¾ç‰‡ç”Ÿæˆ**: ç»§ç»­ä½¿ç”¨è±†åŒ…API
- âœ… **å¤–éƒ¨æœç´¢**: ç»§ç»­ä½¿ç”¨ Perplexity APIï¼ˆå«é™çº§ï¼‰

## ğŸš€ ä½¿ç”¨å»ºè®®

1. **ç«‹å³å¯ç”¨**: æ‰€æœ‰æ–‡æœ¬ç”ŸæˆåŠŸèƒ½ç°åœ¨é€šè¿‡ OpenRouter æä¾›
2. **æ€§èƒ½ç¨³å®š**: åº”è¯¥æ¯”åŸæ¥çš„ Gemini API æ›´ç¨³å®šå¯é 
3. **é…ç½®ç®€å•**: åœ¨è®¾ç½®ä¸­ç¡®è®¤ OpenRouter API å¯†é’¥é…ç½®æ­£ç¡®
4. **ç›‘æ§ä½¿ç”¨**: é€šè¿‡ OpenRouter æ§åˆ¶å°ç›‘æ§ API ä½¿ç”¨æƒ…å†µ

## ğŸ“ éªŒè¯æ–¹æ³•

1. **åŠŸèƒ½æµ‹è¯•**: åœ¨åº”ç”¨ä¸­åˆ›å»ºæ–°æ–‡ç« ï¼ŒéªŒè¯å¤§çº²ç”ŸæˆåŠŸèƒ½
2. **API æµ‹è¯•**: åœ¨è®¾ç½®é¡µé¢ç‚¹å‡»"æµ‹è¯•è¿æ¥"æŒ‰é’®
3. **æ—¥å¿—æ£€æŸ¥**: æµè§ˆå™¨æ§åˆ¶å°åº”æ˜¾ç¤º "è°ƒç”¨OpenRouter API" è€Œä¸æ˜¯ "è°ƒç”¨Gemini API"

---

**âœ… OpenRouter API é›†æˆå®Œæˆï¼ç°åœ¨åº”ç”¨å¯ä»¥æ›´ç¨³å®šåœ°ä½¿ç”¨ Gemini æ¨¡å‹è¿›è¡Œæ–‡æœ¬ç”Ÿæˆã€‚**


